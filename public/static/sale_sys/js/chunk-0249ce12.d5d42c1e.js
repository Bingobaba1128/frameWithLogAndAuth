(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0249ce12"],{"5cf5":function(e,t,r){},"78dc":function(e,t,r){"use strict";r.d(t,"h",(function(){return o})),r.d(t,"i",(function(){return s})),r.d(t,"f",(function(){return a})),r.d(t,"g",(function(){return n})),r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return c})),r.d(t,"j",(function(){return u})),r.d(t,"e",(function(){return p})),r.d(t,"k",(function(){return m})),r.d(t,"c",(function(){return d})),r.d(t,"d",(function(){return f}));var l=r("751a"),o=function(e){return Object(l["a"])({url:"/ERP/searchApproveStyle",method:"get",params:e})},s=function(e){return Object(l["a"])({url:"/ERP/selectApproveOrder",method:"get",params:e})},a=function(e){return Object(l["a"])({url:"/ERP/selectEmplyee",method:"post",data:e})},n=function(e){return Object(l["a"])({url:"/ERP/addApproveOrder",method:"post",data:e})},i=function(e){return Object(l["a"])({url:"/ERP/editCopy",method:"post",data:e})},c=function(e){return Object(l["a"])({url:"/ERP/selApproveTotal",method:"post",data:e})},u=function(e){return Object(l["a"])({url:"/ERP/delApproveOrder",method:"post",data:e})},p=function(e){return Object(l["a"])({url:"/ERP/selectApproveOrder",method:"get",params:e})},m=function(e){return Object(l["a"])({url:"/ERP/editApproveOrder",method:"post",data:e})},d=function(e){return Object(l["a"])({url:"/ERP/agreeApprove",method:"post",data:e})},f=function(e){return Object(l["a"])({url:"/ERP/disagreeApprove",method:"post",data:e})}},"7bb1":function(e,t,r){"use strict";var l=r("5cf5"),o=r.n(l);o.a},"7db0":function(e,t,r){"use strict";var l=r("23e7"),o=r("b727").find,s=r("44d2"),a=r("ae40"),n="find",i=!0,c=a(n);n in[]&&Array(1)[n]((function(){i=!1})),l({target:"Array",proto:!0,forced:i||!c},{find:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),s(n)},c48f:function(e,t,r){"use strict";r.r(t);var l=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("span",[e._v("类型：")]),r("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},on:{change:e.switchType},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.optionslist,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1),r("div",{staticClass:"new_add",on:{click:e.addTypeApproval}},[r("i",{staticClass:"el-icon-circle-plus-outline"}),e._v(" 新增流程 ")]),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.typeApprovalProcesslist,border:e.border,"max-height":"530","row-style":{height:"20px"},"cell-style":{padding:"0px"}}},[r("el-table-column",{attrs:{type:"index",label:"序号",align:"center"}}),r("el-table-column",{attrs:{property:"style",label:"类型",align:"center"}}),r("el-table-column",{attrs:{property:"name",label:"名称",align:"center"}}),r("el-table-column",{attrs:{property:"role",label:"部门",align:"center"}}),r("el-table-column",{attrs:{property:"personName",label:"姓名",align:"center"}}),r("el-table-column",{attrs:{label:"状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s("0"==t.row.state?"启用":"停用"))])]}}])}),r("el-table-column",{attrs:{property:"copyName",label:"抄送人",align:"center"}}),r("el-table-column",{attrs:{property:"address",label:"操作",align:"center",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{staticStyle:{margin:"2px"},attrs:{type:"success",size:"mini"},nativeOn:{click:function(r){return e.editorClick(t.row)}}},[e._v("编辑")]),r("el-button",{attrs:{type:"primary",size:"mini"},nativeOn:{click:function(r){return e.addCopy(t.row)}}},[e._v("增加抄送")]),r("el-button",{attrs:{type:"danger",size:"mini"},nativeOn:{click:function(r){return e.delClick(t.row)}}},[e._v("删除")])]}}])})],1),r("el-dialog",{attrs:{title:e.processType,width:"25%",visible:e.processOuterVisible,closeOnClickModal:e.closeOnClickModal,closeOnPressEscape:e.closeOnPressEscape},on:{"update:visible":function(t){e.processOuterVisible=t}}},[r("div",{staticClass:"form3_wrap"},[r("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"150px"}},[r("el-form-item",{attrs:{label:"序号"}},[r("el-input",{staticStyle:{width:"200px"},attrs:{disabled:!0},model:{value:e.ruleForm.orderNo,callback:function(t){e.$set(e.ruleForm,"orderNo",t)},expression:"ruleForm.orderNo"}})],1),r("el-form-item",{attrs:{label:"类型"}},[r("el-input",{staticStyle:{width:"200px"},attrs:{disabled:!0},model:{value:e.ruleForm.style,callback:function(t){e.$set(e.ruleForm,"style",t)},expression:"ruleForm.style"}})],1),r("el-form-item",{attrs:{label:"名称",prop:"name"}},[r("el-input",{staticStyle:{width:"200px"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),r("el-form-item",{attrs:{label:"岗位"}},[r("el-input",{staticStyle:{width:"200px"},on:{focus:e.jobsClick},model:{value:e.ruleForm.role,callback:function(t){e.$set(e.ruleForm,"role",t)},expression:"ruleForm.role"}})],1),r("el-form-item",{attrs:{label:"人员"}},[r("el-input",{staticStyle:{width:"200px"},on:{focus:e.jobsClick},model:{value:e.ruleForm.personName,callback:function(t){e.$set(e.ruleForm,"personName",t)},expression:"ruleForm.personName"}})],1),r("el-form-item",{attrs:{label:"状态"}},[r("el-select",{staticStyle:{width:"200px"},model:{value:e.ruleForm.state,callback:function(t){e.$set(e.ruleForm,"state",t)},expression:"ruleForm.state"}},[r("el-option",{attrs:{label:"启用",value:"0"}}),r("el-option",{attrs:{label:"停用",value:"1"}})],1)],1),r("el-form-item",{staticClass:"sub1"},[r("el-button",{staticStyle:{width:"95px"},on:{click:e.closeOuterVisible}},[e._v("取消")]),r("el-button",{staticStyle:{width:"95px"},attrs:{type:"primary"},on:{click:function(t){return e.submitProcess("ruleForm")}}},[e._v("提交")])],1)],1)],1),r("el-dialog",{attrs:{width:"50%",title:"岗位选择",visible:e.processInnerVisible,closeOnClickModal:e.closeOnClickModal,closeOnPressEscape:e.closeOnPressEscape,"append-to-body":""},on:{"update:visible":function(t){e.processInnerVisible=t}}},[r("div",{staticClass:"post_top"},[r("el-select",{staticStyle:{width:"200px"},attrs:{disabled:!0},model:{value:e.value1,callback:function(t){e.value1=t},expression:"value1"}},e._l(e.postlist,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),r("el-form",{ref:"searchname",staticStyle:{marginLeft:"15px"},attrs:{rules:e.rules,inline:!0,model:e.searchname}},[r("el-form-item",{attrs:{label:"搜索框",prop:"employeeName"}},[r("el-input",{attrs:{autocomplete:"off",placeholder:"请输入名称"},model:{value:e.searchname.employeeName,callback:function(t){e.$set(e.searchname,"employeeName",t)},expression:"searchname.employeeName"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.searchName("searchname")}}},[e._v("查询")])],1)],1)],1),r("div",{staticClass:"post_bottom"},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.personInfolist,border:e.border,"row-style":{height:"20px"},"cell-style":{padding:"0px"}},on:{"row-dblclick":e.switchPersonInfo}},[r("el-table-column",{attrs:{type:"index",label:"序号",align:"center"}}),r("el-table-column",{attrs:{property:"employeeId",label:"编号",align:"center"}}),r("el-table-column",{attrs:{property:"employeeName",label:"姓名",align:"center"}}),r("el-table-column",{attrs:{property:"department",label:"部门",align:"center"}}),r("el-table-column",{attrs:{property:"duty",label:"岗位",align:"center"}})],1)],1)])],1),r("el-dialog",{attrs:{title:"增加抄送人",visible:e.addCopyVisible,width:"50%",closeOnClickModal:e.closeOnClickModal,closeOnPressEscape:e.closeOnPressEscape},on:{"update:visible":function(t){e.addCopyVisible=t}}},[r("div",{staticClass:"copy_top"},[r("el-form",{ref:"searchname",attrs:{rules:e.rules,inline:!0,model:e.searchname}},[r("el-form-item",{attrs:{label:"搜索框",prop:"employeeName"}},[r("el-input",{attrs:{autocomplete:"off",placeholder:"请输入名称"},model:{value:e.searchname.employeeName,callback:function(t){e.$set(e.searchname,"employeeName",t)},expression:"searchname.employeeName"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.searchName("searchname")}}},[e._v("查询")])],1)],1)],1),r("div",{staticClass:"copy_bottom"},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.personInfolist,border:e.border,"row-style":{height:"20px"},"cell-style":{padding:"0px"}},on:{"row-dblclick":e.switchCopyPerson}},[r("el-table-column",{attrs:{type:"index",label:"序号",align:"center"}}),r("el-table-column",{attrs:{property:"employeeId",label:"编号",align:"center"}}),r("el-table-column",{attrs:{property:"employeeName",label:"姓名",align:"center"}}),r("el-table-column",{attrs:{property:"department",label:"部门",align:"center"}}),r("el-table-column",{attrs:{property:"duty",label:"岗位",align:"center"}})],1)],1)])],1)},o=[],s=(r("7db0"),r("b0c0"),r("78dc")),a=r("b383"),n=r.n(a),i={name:"spsz",data:function(){return{processType:"",selectStatus:"",value:"",value1:"3",border:!0,processOuterVisible:!1,processInnerVisible:!1,closeOnClickModal:!1,closeOnPressEscape:!1,addCopyVisible:!1,postlist:[{value:"1",label:"按照角色"},{value:"2",label:"按照组织架构"},{value:"3",label:"按照名称"}],optionslist:[],typeApprovalProcesslist:[],contractList:[],ruleForm:{name:"",personId:"",role:"",personName:"",state:"1",orderNo:"",style:"",copyId:"",copyName:""},rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}],employeeName:[{required:!0,message:"名称不能为空",trigger:"blur"}]},searchname:{employeeName:""},personInfolist:[]}},methods:{editorClick:function(e){var t=this;this.processType="修改流程",this.personInfolist=[],this.searchname.employeeName="",this.selectStatus="2";var r={guid:e.guid};s["e"](r).then((function(e){t.processOuterVisible=!0,t.ruleForm=e.data[0]})).catch((function(e){console.log(e)}))},delClick:function(e){var t=this;this.$confirm("确认删除该条审批配置?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var r={guid:e.guid};s["j"](n.a.stringify(r)).then((function(e){t.typeApprovalProcess(t.ruleForm.id),t.$message({message:"删除成功",duration:1500})})).catch((function(e){console.log(e)}))})).catch((function(){}))},switchCopyPerson:function(e){var t=this,r={copyId:this.ruleForm.copyId+" "+e.employeeId,copyName:this.ruleForm.copyName+" "+e.employeeName,style:this.ruleForm.style};s["a"](n.a.stringify(r)).then((function(e){t.typeApprovalProcess(t.ruleForm.style),t.typeApprovalProcess(t.ruleForm.id),t.$message({message:"添加成功",duration:1500}),t.addCopyVisible=!1})).catch((function(e){console.log(e)}))},addCopy:function(e){this.addCopyVisible=!0,this.ruleForm.copyId=e.copyId,this.ruleForm.copyName=e.copyName},switchPersonInfo:function(e){this.ruleForm.role=e.duty,this.ruleForm.personName=e.employeeName,this.ruleForm.personId=e.employeeId,this.processInnerVisible=!1},searchName:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;var r={symbol:1,employeeName:t.searchname.employeeName};s["f"](n.a.stringify(r)).then((function(e){"301"==e.code&&t.$message({message:"没有查到所需要的信息",duration:1500}),t.personInfolist=e.data})).catch((function(e){console.log(e)}))}))},closeOuterVisible:function(){this.processOuterVisible=!1},jobsClick:function(){this.processInnerVisible=!0},submitProcess:function(e){var t=this;(this.selectStatus="1")?this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;s["g"](t.ruleForm).then((function(e){t.$message({message:"添加成功",duration:1500}),t.processOuterVisible=!1,t.typeApprovalProcess(t.ruleForm.id)})).catch((function(e){console.log(e)}))})):this.$refs[e].validate((function(e){if(!e)return!1;s["k"](t.ruleForm).then((function(e){t.$message({message:"修改成功",duration:1500}),t.processOuterVisible=!1,t.typeApprovalProcess(t.ruleForm.id)})).catch((function(e){console.log(e)}))}))},addTypeApproval:function(){this.processType="新增流程",this.personInfolist=[],this.searchname.employeeName="",this.selectStatus,""==this.ruleForm.style?this.$message({message:"请选择类型",duration:1500}):(this.processOuterVisible=!0,this.ruleForm.name="",this.ruleForm.role="",this.ruleForm.personName="",this.ruleForm.personId="",this.ruleForm.state="启用")},typeApproval:function(){var e=this;s["h"]().then((function(t){e.optionslist=t.data})).catch((function(e){console.log(e)}))},typeApprovalProcess:function(e){var t=this,r={id:e};s["i"](r).then((function(e){t.ruleForm.orderNo="",t.typeApprovalProcesslist=e.data,t.ruleForm.orderNo=t.typeApprovalProcesslist.length+1})).catch((function(e){console.log(e)}))},switchType:function(e){var t={};t=this.optionslist.find((function(t){return t.id===e})),this.typeApprovalProcess(t.id),this.ruleForm.style=t.name,this.ruleForm.id=t.id}},mounted:function(){this.typeApproval()}},c=i,u=(r("7bb1"),r("2877")),p=Object(u["a"])(c,l,o,!1,null,"20c123f2",null);t["default"]=p.exports}}]);